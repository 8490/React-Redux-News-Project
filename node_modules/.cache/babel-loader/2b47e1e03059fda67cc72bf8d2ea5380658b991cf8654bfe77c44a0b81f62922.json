{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  newsList: [],\n  loading: false,\n  error: false\n};\n\n//? State'lerin API gibi async kaynaklardan gelen verilere gore guncellenmesi gerekebilir.\n//? Ancak boyle bir durumda async islem tamamlandiktan sonra state guncellenmelidir.\n//? Gonderilen api istegi ile dogrudan state guncellememelidir.\n//? Islemin tamamlanmasi ile gelen veriye gore state'in guncellenemsini saglamak\n//? adina bir arabirim kullanilmaktadir.\n//? Bu arabirim middleware denilir.Redux-Toolkit, default olarak Thunk kullanmaktadir.\n//! Thunk'ın amaci reducers'a islenmis sonuclari gondermeden once gecikmeli asenkron ismlerinin yurutulmesini saglamaktir.\n\nexport const getNews = createAsyncThunk(\"getNews\",\n//! action types\n\nasync (thunkAPI, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  //! asyn callback function\n  const API_KEY = \"02d142c50d8b4247b974b2532343517\";\n  const url = `https://newsapi.org/v2/top-headlines?country=us&apiKey=${API_KEY}`;\n  try {\n    const {\n      data\n    } = await axios(url);\n    return data.articles;\n  } catch (error) {\n    console.log(error);\n    return rejectWithValue(\"Something went wrong\");\n  }\n});\nconst newsSlice = createSlice({\n  name: \"news\",\n  initialState,\n  reducers: {\n    clearNewsList: state => {\n      state.newsList = [];\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getNews.pending, state => {\n      state.loading = true;\n    }).addCase(getNews.fulfilled, (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      state.newsList = payload;\n      state.loading = false;\n    }).addCase(getNews.rejected, (state, _ref3) => {\n      let {\n        payload\n      } = _ref3;\n      state.loading = false;\n      state.error = payload;\n    });\n  }\n});\nexport const {\n  clearNewsList\n} = newsSlice.actions;\nexport default newsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","newsList","loading","error","getNews","thunkAPI","rejectWithValue","API_KEY","url","data","articles","console","log","newsSlice","name","reducers","clearNewsList","state","extraReducers","builder","addCase","pending","fulfilled","payload","rejected","actions","reducer"],"sources":["/home/san/React/React-Redux-News-Project/src/features/newsSlice.jsx"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nconst initialState = {\n  newsList: [],\n  loading: false,\n  error: false,\n};\n\n//? State'lerin API gibi async kaynaklardan gelen verilere gore guncellenmesi gerekebilir.\n//? Ancak boyle bir durumda async islem tamamlandiktan sonra state guncellenmelidir.\n//? Gonderilen api istegi ile dogrudan state guncellememelidir.\n//? Islemin tamamlanmasi ile gelen veriye gore state'in guncellenemsini saglamak\n//? adina bir arabirim kullanilmaktadir.\n//? Bu arabirim middleware denilir.Redux-Toolkit, default olarak Thunk kullanmaktadir.\n//! Thunk'ın amaci reducers'a islenmis sonuclari gondermeden once gecikmeli asenkron ismlerinin yurutulmesini saglamaktir.\n\nexport const getNews = createAsyncThunk(\n  \"getNews\", //! action types\n\n  async (thunkAPI, { rejectWithValue }) => {\n    //! asyn callback function\n    const API_KEY = \"02d142c50d8b4247b974b2532343517\";\n    const url = `https://newsapi.org/v2/top-headlines?country=us&apiKey=${API_KEY}`;\n    try {\n      const { data } = await axios(url);\n      return data.articles;\n    } catch (error) {\n      console.log(error);\n      return rejectWithValue(\"Something went wrong\");\n    }\n  }\n);\n\nconst newsSlice = createSlice({\n  name: \"news\",\n  initialState,\n  reducers: {\n    clearNewsList: (state) => {\n      state.newsList = [];\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(getNews.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(getNews.fulfilled, (state, { payload }) => {\n        state.newsList = payload;\n        state.loading = false;\n      })\n      .addCase(getNews.rejected, (state, { payload }) => {\n        state.loading = false;\n        state.error = payload;\n      });\n  },\n});\n\nexport const { clearNewsList } = newsSlice.actions;\n\nexport default newsSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG;EACnBC,QAAQ,EAAE,EAAE;EACZC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE;AACT,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,OAAO,GAAGN,gBAAgB,CACrC,SAAS;AAAE;;AAEX,OAAOO,QAAQ,WAA0B;EAAA,IAAxB;IAAEC;EAAgB,CAAC;EAClC;EACA,MAAMC,OAAO,GAAG,iCAAiC;EACjD,MAAMC,GAAG,GAAI,0DAAyDD,OAAQ,EAAC;EAC/E,IAAI;IACF,MAAM;MAAEE;IAAK,CAAC,GAAG,MAAMV,KAAK,CAACS,GAAG,CAAC;IACjC,OAAOC,IAAI,CAACC,QAAQ;EACtB,CAAC,CAAC,OAAOP,KAAK,EAAE;IACdQ,OAAO,CAACC,GAAG,CAACT,KAAK,CAAC;IAClB,OAAOG,eAAe,CAAC,sBAAsB,CAAC;EAChD;AACF,CAAC,CACF;AAED,MAAMO,SAAS,GAAGhB,WAAW,CAAC;EAC5BiB,IAAI,EAAE,MAAM;EACZd,YAAY;EACZe,QAAQ,EAAE;IACRC,aAAa,EAAGC,KAAK,IAAK;MACxBA,KAAK,CAAChB,QAAQ,GAAG,EAAE;IACrB;EACF,CAAC;EACDiB,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAAChB,OAAO,CAACiB,OAAO,EAAGJ,KAAK,IAAK;MACnCA,KAAK,CAACf,OAAO,GAAG,IAAI;IACtB,CAAC,CAAC,CACDkB,OAAO,CAAChB,OAAO,CAACkB,SAAS,EAAE,CAACL,KAAK,YAAkB;MAAA,IAAhB;QAAEM;MAAQ,CAAC;MAC7CN,KAAK,CAAChB,QAAQ,GAAGsB,OAAO;MACxBN,KAAK,CAACf,OAAO,GAAG,KAAK;IACvB,CAAC,CAAC,CACDkB,OAAO,CAAChB,OAAO,CAACoB,QAAQ,EAAE,CAACP,KAAK,YAAkB;MAAA,IAAhB;QAAEM;MAAQ,CAAC;MAC5CN,KAAK,CAACf,OAAO,GAAG,KAAK;MACrBe,KAAK,CAACd,KAAK,GAAGoB,OAAO;IACvB,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEP;AAAc,CAAC,GAAGH,SAAS,CAACY,OAAO;AAElD,eAAeZ,SAAS,CAACa,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}